define(['jquery','domReady!'],function($){'use strict';$.widget('wac.qty_change',{options:{downButtonClass:'down-button',upButtonClass:'up-button',minQuant:0,maxQuant:1,inputClass:'has-plus-minus',downButton:null,upButton:null},_init:function(){var self=this;self.downButton=$('<button type="button" class="'+self.options.downButtonClass+'"></button>');self.upButton=$('<button type="button" class="'+self.options.upButtonClass+'"></button>');self.element.before(self.downButton).after(self.upButton);self.element.addClass(self.options.inputClass);self.element.on('change',function(e){self.checkValue();});var keyupEvent=document.createEvent('Event');keyupEvent.initEvent('keyup',true,true);self.downButton.on('click',function(e){e.preventDefault();if(Number(self.element[0].value)>Number(self.options.minQuant)){self.element[0].value--;self.element[0].dispatchEvent(keyupEvent);self.element.trigger('change');}});self.upButton.on('click',function(e){e.preventDefault();if(Number(self.element[0].value)<Number(self.options.maxQuant)){self.element[0].value++;self.element[0].dispatchEvent(keyupEvent);self.element.trigger('change');}});self.checkValue();},checkValue:function(){var self=this;if(Number(self.element[0].value)<=Number(self.options.minQuant)){self.downButton.attr('disabled','true');}else{self.downButton.removeAttr('disabled');}
if(Number(self.element[0].value)>=Number(self.options.maxQuant)){self.upButton.attr('disabled','true');}else{self.upButton.removeAttr('disabled');}}});return $.wac.qty_change;});