define(['ko','underscore','Magento_Ui/js/grid/listing','jquery','owlCarousel'],function(ko,_,Listing,$){'use strict';return Listing.extend({defaults:{additionalClasses:'',filteredRows:{},limit:5,listens:{elems:'filterRowsFromCache','${ $.provider }:data.items':'filterRowsFromServer'}},initialize:function(){this._super();this.filteredRows=ko.observable();this.initProductsLimit();this.hideLoader();},initProductsLimit:function(){if(this.source['page_size']){this.limit=this.source['page_size'];}
return this;},initObservable:function(){this._super().track({rows:[]});return this;},filterRowsFromCache:function(){this._filterRows(this.rows);},filterRowsFromServer:function(rows){this._filterRows(rows);},_filterRows:function(rows){this.filteredRows(_.sortBy(rows,'added_at').reverse().slice(0,this.limit));},getUrl:function(row){return row.url;},getComponentByCode:function(code){var elems=this.elems()?this.elems():ko.getObservable(this,'elems'),component;component=_.filter(elems,function(elem){return elem.index===code;},this).pop();return component;},pdpRvowlInit:function(){$('.block-viewed-products-grid .product-items').owlCarousel({autoPlay:3000,singleItem:true,items:5,margin:20,nav:true,navText:['<div class="prev-arrow"></div>','<div class="next-arrow"></div>'],pagination:false,responsiveClass:true,responsive:{0:{items:2},500:{items:3},768:{items:4},1024:{items:5}}});}});});